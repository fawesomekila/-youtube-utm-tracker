<!DOCTYPE html>
<!-- saved from url=(0091)https://page.genspark.site/page/toolu_01TLd38tGT8ixaLYhMyr4uG8/YouTube_UTM_Tracker_App.html -->
<html lang="zh-CN"><plasmo-csui><template shadowrootmode="open"><div id="plasmo-shadow-container" style="z-index: 2147483647; position: relative;"><div id="plasmo-overlay-0" class="plasmo-csui-container" style="display: flex; position: absolute; top: 0px; left: 0px;"></div></div></template></plasmo-csui><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube视频UTM追踪系统</title>
    <link href="./YouTube视频UTM追踪系统_files/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./YouTube视频UTM追踪系统_files/all.min.css">
    <script src="./YouTube视频UTM追踪系统_files/chart.min.js"></script>
<style id="_goober"> @keyframes go2264125279{from{transform:scale(0) rotate(45deg);opacity:0;}to{transform:scale(1) rotate(45deg);opacity:1;}}@keyframes go3020080000{from{transform:scale(0);opacity:0;}to{transform:scale(1);opacity:1;}}@keyframes go463499852{from{transform:scale(0) rotate(90deg);opacity:0;}to{transform:scale(1) rotate(90deg);opacity:1;}}@keyframes go1268368563{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}@keyframes go1310225428{from{transform:scale(0) rotate(45deg);opacity:0;}to{transform:scale(1) rotate(45deg);opacity:1;}}@keyframes go651618207{0%{height:0;width:0;opacity:0;}40%{height:0;width:6px;opacity:1;}100%{opacity:1;height:10px;}}@keyframes go901347462{from{transform:scale(0.6);opacity:0.4;}to{transform:scale(1);opacity:1;}}.go4109123758{z-index:9999;}.go4109123758 > *{pointer-events:auto;}</style></head>
<body class="bg-gray-50">
    <div class="min-h-screen flex flex-col">
        <!-- 顶部导航栏 -->
        <header class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <h1 class="text-2xl font-bold flex items-center">
                    <i class="fab fa-youtube text-red-500 mr-2"></i>
                    YouTube视频UTM追踪系统
                </h1>
                <div class="flex space-x-2">
                    <button id="exportBtn" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md flex items-center">
                        <i class="fas fa-file-export mr-1"></i> 导出数据
                    </button>
                    <button id="importBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md flex items-center">
                        <i class="fas fa-file-import mr-1"></i> 导入数据
                    </button>
                </div>
            </div>
        </header>

        <!-- 主要内容 -->
        <main class="flex-grow container mx-auto px-4 py-6">
            <!-- 标签页导航 -->
            <div class="border-b border-gray-200 mb-6">
                <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="tab-nav">
                    <li class="mr-2">
                        <a href="https://page.genspark.site/page/toolu_01TLd38tGT8ixaLYhMyr4uG8/YouTube_UTM_Tracker_App.html#instructions" class="tab-link inline-block p-4 border-b-2 rounded-t-lg active text-purple-600 border-purple-600" data-tab="instructions">
                            <i class="fas fa-info-circle mr-1"></i> 说明与规范
                        </a>
                    </li>
                    <li class="mr-2">
                        <a href="https://page.genspark.site/page/toolu_01TLd38tGT8ixaLYhMyr4uG8/YouTube_UTM_Tracker_App.html#tracking" class="tab-link inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 border-transparent" data-tab="tracking">
                            <i class="fas fa-link mr-1"></i> 视频追踪主表
                        </a>
                    </li>
                    <li class="mr-2">
                        <a href="https://page.genspark.site/page/toolu_01TLd38tGT8ixaLYhMyr4uG8/YouTube_UTM_Tracker_App.html#naming" class="tab-link inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 border-transparent" data-tab="naming">
                            <i class="fas fa-tags mr-1"></i> 命名参考
                        </a>
                    </li>
                    <li>
                        <a href="https://page.genspark.site/page/toolu_01TLd38tGT8ixaLYhMyr4uG8/YouTube_UTM_Tracker_App.html#analytics" class="tab-link inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 border-transparent" data-tab="analytics">
                            <i class="fas fa-chart-bar mr-1"></i> 数据分析
                        </a>
                    </li>
                </ul>
            </div>

            <!-- 标签页内容 -->
            <div id="tab-content">
                <!-- 说明与规范 -->
                <div id="instructions" class="tab-pane active">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">YouTube视频UTM追踪系统使用指南</h2>
                        
                        <section class="mb-6">
                            <h3 class="text-xl font-semibold text-purple-700 mb-3">目的</h3>
                            <p class="text-gray-700">
                                本系统用于系统化管理YouTube视频的UTM追踪链接，帮助您准确分析每个视频为网站带来的流量和转化。通过使用标准化的追踪参数，您可以在Google Analytics中清晰地识别每个视频的表现。
                            </p>
                        </section>

                        <section class="mb-6">
                            <h3 class="text-xl font-semibold text-purple-700 mb-3">系统功能</h3>
                            <ul class="list-disc pl-6 text-gray-700 space-y-2">
                                <li><strong>视频追踪主表</strong>：管理所有YouTube视频的UTM追踪链接</li>
                                <li><strong>自动链接生成</strong>：根据输入参数自动生成完整的UTM链接</li>
                                <li><strong>本地数据存储</strong>：所有数据保存在您的浏览器中，无需担心数据丢失</li>
                                <li><strong>数据导入/导出</strong>：支持数据的备份和恢复</li>
                                <li><strong>性能分析</strong>：自动计算并可视化视频性能数据</li>
                            </ul>
                        </section>

                        <section class="mb-6">
                            <h3 class="text-xl font-semibold text-purple-700 mb-3">UTM参数说明</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-white border border-gray-200">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="py-2 px-4 border-b border-gray-200 text-left">参数</th>
                                            <th class="py-2 px-4 border-b border-gray-200 text-left">作用</th>
                                            <th class="py-2 px-4 border-b border-gray-200 text-left">建议值示例</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="py-2 px-4 border-b border-gray-200">utm_source</td>
                                            <td class="py-2 px-4 border-b border-gray-200">流量来源</td>
                                            <td class="py-2 px-4 border-b border-gray-200">youtube</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border-b border-gray-200">utm_medium</td>
                                            <td class="py-2 px-4 border-b border-gray-200">营销媒介</td>
                                            <td class="py-2 px-4 border-b border-gray-200">video, shorts</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border-b border-gray-200">utm_campaign</td>
                                            <td class="py-2 px-4 border-b border-gray-200">营销活动</td>
                                            <td class="py-2 px-4 border-b border-gray-200">product_feature, tutorial</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border-b border-gray-200">utm_term</td>
                                            <td class="py-2 px-4 border-b border-gray-200">关键词标识</td>
                                            <td class="py-2 px-4 border-b border-gray-200">视频ID或主题标识</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border-b border-gray-200">utm_content</td>
                                            <td class="py-2 px-4 border-b border-gray-200">内容区分</td>
                                            <td class="py-2 px-4 border-b border-gray-200">description_link, pinned_comment</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>

                        <section class="mb-6">
                            <h3 class="text-xl font-semibold text-purple-700 mb-3">命名规范</h3>
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
                                <p class="text-yellow-700">为确保数据分析的一致性，请遵循标准命名规范。详细规范请参考"命名参考"标签页。</p>
                            </div>
                            <ul class="list-disc pl-6 text-gray-700 space-y-2">
                                <li><strong>utm_source</strong>：使用全小写字母，对于YouTube统一使用"youtube"</li>
                                <li><strong>utm_medium</strong>：区分不同的视频类型，如regular_video, shorts, live等</li>
                                <li><strong>utm_campaign</strong>：使用下划线连接词语，如product_feature</li>
                                <li><strong>utm_term</strong>：视频上传前使用临时标识符，上传后替换为实际视频ID</li>
                                <li><strong>utm_content</strong>：标识链接在视频中的位置，如description_link</li>
                            </ul>
                        </section>

                        <section>
                            <h3 class="text-xl font-semibold text-purple-700 mb-3">使用步骤</h3>
                            <ol class="list-decimal pl-6 text-gray-700 space-y-2">
                                <li>在"视频追踪主表"中点击"添加视频"按钮</li>
                                <li>填写视频基本信息和UTM参数</li>
                                <li>系统自动生成完整UTM链接</li>
                                <li>视频上传后，更新视频ID等相关信息</li>
                                <li>定期在"数据分析"工作表中记录性能数据</li>
                                <li>使用"导出数据"功能备份您的数据</li>
                            </ol>
                        </section>
                    </div>
                </div>

                <!-- 视频追踪主表 -->
                <div id="tracking" class="tab-pane hidden">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">视频追踪主表</h2>
                            <button id="addVideoBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md flex items-center">
                                <i class="fas fa-plus mr-1"></i> 添加视频
                            </button>
                        </div>

                        <div class="mb-4 flex items-center">
                            <div class="relative flex-grow">
                                <input id="searchVideo" type="text" placeholder="搜索视频..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
                            </div>
                            <div class="ml-4">
                                <select id="filterStatus" class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="all">所有状态</option>
                                    <option value="计划中">计划中</option>
                                    <option value="已发布">已发布</option>
                                    <option value="已归档">已归档</option>
                                </select>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table id="videosTable" class="min-w-full bg-white border border-gray-200">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">序号</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">视频标题</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">视频类型</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">临时视频ID</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">实际视频ID</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">计划发布日期</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">状态</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">UTM链接</th>
                                        <th class="py-2 px-3 border-b border-gray-200 text-left">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="videosList"></tbody>
                            </table>
                        </div>
                        <div id="noVideosMessage" class="text-center py-4 text-gray-500">
                            <i class="fas fa-video text-3xl mb-2"></i>
                            <p>还没有添加任何视频。点击"添加视频"按钮开始追踪。</p>
                        </div>
                    </div>
                </div>

                <!-- 命名参考 -->
                <div id="naming" class="tab-pane hidden">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">UTM参数命名参考</h2>

                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- utm_source参考 -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-purple-700 mb-3">utm_source标准选项</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full bg-white border border-gray-200">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">来源</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">标准命名</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">说明</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">YouTube</td>
                                                <td class="py-2 px-3 border-b border-gray-200">youtube</td>
                                                <td class="py-2 px-3 border-b border-gray-200">所有YouTube视频通用</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">Facebook</td>
                                                <td class="py-2 px-3 border-b border-gray-200">facebook</td>
                                                <td class="py-2 px-3 border-b border-gray-200">Facebook平台</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">Instagram</td>
                                                <td class="py-2 px-3 border-b border-gray-200">instagram</td>
                                                <td class="py-2 px-3 border-b border-gray-200">Instagram平台</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">TikTok</td>
                                                <td class="py-2 px-3 border-b border-gray-200">tiktok</td>
                                                <td class="py-2 px-3 border-b border-gray-200">TikTok平台</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- utm_medium参考 -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-purple-700 mb-3">utm_medium标准选项</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full bg-white border border-gray-200">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">媒介类型</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">标准命名</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">说明</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">常规视频</td>
                                                <td class="py-2 px-3 border-b border-gray-200">video</td>
                                                <td class="py-2 px-3 border-b border-gray-200">标准YouTube视频</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">短视频</td>
                                                <td class="py-2 px-3 border-b border-gray-200">shorts</td>
                                                <td class="py-2 px-3 border-b border-gray-200">YouTube Shorts短视频</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">直播</td>
                                                <td class="py-2 px-3 border-b border-gray-200">live</td>
                                                <td class="py-2 px-3 border-b border-gray-200">YouTube直播</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">首映</td>
                                                <td class="py-2 px-3 border-b border-gray-200">premiere</td>
                                                <td class="py-2 px-3 border-b border-gray-200">YouTube首映视频</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- utm_campaign参考 -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-purple-700 mb-3">utm_campaign命名结构</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full bg-white border border-gray-200">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">活动类型</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">命名模式</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">示例</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">产品功能</td>
                                                <td class="py-2 px-3 border-b border-gray-200">feature_[功能名称]</td>
                                                <td class="py-2 px-3 border-b border-gray-200">feature_instructed</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">教程</td>
                                                <td class="py-2 px-3 border-b border-gray-200">tutorial_[主题]</td>
                                                <td class="py-2 px-3 border-b border-gray-200">tutorial_editing</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">案例研究</td>
                                                <td class="py-2 px-3 border-b border-gray-200">case_study_[行业]</td>
                                                <td class="py-2 px-3 border-b border-gray-200">case_study_ecommerce</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">活动</td>
                                                <td class="py-2 px-3 border-b border-gray-200">event_[活动名称]_[年份]</td>
                                                <td class="py-2 px-3 border-b border-gray-200">event_launch_2025</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- utm_content参考 -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-purple-700 mb-3">utm_content标准选项</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full bg-white border border-gray-200">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">位置</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">标准命名</th>
                                                <th class="py-2 px-3 border-b border-gray-200 text-left">说明</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">视频描述</td>
                                                <td class="py-2 px-3 border-b border-gray-200">description_link</td>
                                                <td class="py-2 px-3 border-b border-gray-200">视频描述中的链接</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">置顶评论</td>
                                                <td class="py-2 px-3 border-b border-gray-200">pinned_comment</td>
                                                <td class="py-2 px-3 border-b border-gray-200">置顶评论中的链接</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">视频卡片</td>
                                                <td class="py-2 px-3 border-b border-gray-200">video_card</td>
                                                <td class="py-2 px-3 border-b border-gray-200">视频中的卡片链接</td>
                                            </tr>
                                            <tr>
                                                <td class="py-2 px-3 border-b border-gray-200">结束画面</td>
                                                <td class="py-2 px-3 border-b border-gray-200">end_screen</td>
                                                <td class="py-2 px-3 border-b border-gray-200">视频结束画面中的链接</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-purple-700 mb-3">临时视频ID命名模式</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-white border border-gray-200">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">视频类型</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">命名模式</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">示例</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="py-2 px-3 border-b border-gray-200">功能演示</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_[功能]_demo_[序号]</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_instructed_demo_01</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-3 border-b border-gray-200">教程</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_[主题]_tutorial_[序号]</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_editing_tutorial_01</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-3 border-b border-gray-200">案例分享</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_case_study_[序号]</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_case_study_01</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-3 border-b border-gray-200">新功能预告</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_new_feature_[序号]</td>
                                            <td class="py-2 px-3 border-b border-gray-200">temp_new_feature_01</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 数据分析 -->
                <div id="analytics" class="tab-pane hidden">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">视频性能数据分析</h2>
                            <button id="updateAnalyticsBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md flex items-center">
                                <i class="fas fa-sync-alt mr-1"></i> 更新数据
                            </button>
                        </div>

                        <div class="mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="bg-purple-50 border-l-4 border-purple-500 rounded-md p-4">
                                    <h4 class="text-purple-900 text-sm font-semibold">总视频数</h4>
                                    <p id="totalVideos" class="text-2xl font-bold text-purple-600">0</p>
                                </div>
                                <div class="bg-blue-50 border-l-4 border-blue-500 rounded-md p-4">
                                    <h4 class="text-blue-900 text-sm font-semibold">总访问量</h4>
                                    <p id="totalVisits" class="text-2xl font-bold text-blue-600">0</p>
                                </div>
                                <div class="bg-green-50 border-l-4 border-green-500 rounded-md p-4">
                                    <h4 class="text-green-900 text-sm font-semibold">总转化数</h4>
                                    <p id="totalConversions" class="text-2xl font-bold text-green-600">0</p>
                                </div>
                                <div class="bg-yellow-50 border-l-4 border-yellow-500 rounded-md p-4">
                                    <h4 class="text-yellow-900 text-sm font-semibold">平均转化率</h4>
                                    <p id="avgConversionRate" class="text-2xl font-bold text-yellow-600">0.00%</p>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-purple-700 mb-3">访问量比较</h3>
                                <div class="h-64">
                                    <canvas id="visitsChart" style="box-sizing: border-box; display: block; height: 256px; width: 682px;" width="682" height="256"></canvas>
                                </div>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-purple-700 mb-3">转化率比较</h3>
                                <div class="h-64">
                                    <canvas id="conversionRateChart" style="box-sizing: border-box; display: block; height: 256px; width: 682px;" width="682" height="256"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4 mb-6">
                            <h3 class="text-lg font-semibold text-purple-700 mb-3">视频性能详情</h3>
                            <div class="overflow-x-auto">
                                <table id="analyticsTable" class="min-w-full bg-white border border-gray-200">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">视频标题</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">视频ID</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">发布日期</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">观看数</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">访问量</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">转化数</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">转化率</th>
                                            <th class="py-2 px-3 border-b border-gray-200 text-left">操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="analyticsTableBody"></tbody>
                                </table>
                            </div>
                            <div id="noAnalyticsMessage" class="text-center py-4 text-gray-500">
                                <i class="fas fa-chart-line text-3xl mb-2"></i>
                                <p>暂无视频性能数据。请添加视频并输入性能数据进行分析。</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-purple-700 mb-3">近期趋势</h3>
                            <div class="h-64">
                                <canvas id="trendsChart" style="box-sizing: border-box; display: block; height: 256px; width: 1422px;" width="1422" height="256"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 页脚 -->
        <footer class="bg-gray-800 text-white py-4">
            <div class="container mx-auto px-4 text-center">
                <p>YouTube视频UTM追踪系统 © 2025</p>
                <p class="text-sm text-gray-400 mt-1">数据存储在本地浏览器中，定期导出备份以防数据丢失</p>
            </div>
        </footer>
    </div>

    <!-- 添加/编辑视频模态框 -->
    <div id="videoModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg w-full max-w-4xl max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modalTitle" class="text-xl font-bold text-gray-800">添加新视频</h3>
                    <button id="closeModal" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="videoForm" class="space-y-4">
                    <input type="hidden" id="videoId" value="">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="videoTitle" class="block text-sm font-medium text-gray-700 mb-1">视频标题 *</label>
                            <input type="text" id="videoTitle" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" required="">
                        </div>
                        <div>
                            <label for="videoType" class="block text-sm font-medium text-gray-700 mb-1">视频类型 *</label>
                            <select id="videoType" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" required="">
                                <option value="">请选择...</option>
                                <option value="video">常规视频</option>
                                <option value="shorts">短视频</option>
                                <option value="live">直播</option>
                                <option value="premiere">首映</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="tempVideoId" class="block text-sm font-medium text-gray-700 mb-1">临时视频ID</label>
                            <input type="text" id="tempVideoId" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="例如：temp_instructed_demo_01">
                        </div>
                        <div>
                            <label for="actualVideoId" class="block text-sm font-medium text-gray-700 mb-1">实际视频ID</label>
                            <input type="text" id="actualVideoId" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="视频上传后填写">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="plannedDate" class="block text-sm font-medium text-gray-700 mb-1">计划发布日期</label>
                            <input type="date" id="plannedDate" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label for="actualDate" class="block text-sm font-medium text-gray-700 mb-1">实际发布日期</label>
                            <input type="date" id="actualDate" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>

                    <div>
                        <label for="targetUrl" class="block text-sm font-medium text-gray-700 mb-1">目标网站URL *</label>
                        <input type="url" id="targetUrl" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="例如：https://www.sellerpic.ai/" required="">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="utmSource" class="block text-sm font-medium text-gray-700 mb-1">utm_source *</label>
                            <input type="text" id="utmSource" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" value="youtube" required="">
                        </div>
                        <div>
                            <label for="utmMedium" class="block text-sm font-medium text-gray-700 mb-1">utm_medium *</label>
                            <select id="utmMedium" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" required="">
                                <option value="">请选择...</option>
                                <option value="video">video</option>
                                <option value="shorts">shorts</option>
                                <option value="live">live</option>
                                <option value="premiere">premiere</option>
                            </select>
                        </div>
                        <div>
                            <label for="utmCampaign" class="block text-sm font-medium text-gray-700 mb-1">utm_campaign *</label>
                            <input type="text" id="utmCampaign" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="例如：feature_instructed" required="">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="utmTerm" class="block text-sm font-medium text-gray-700 mb-1">utm_term</label>
                            <input type="text" id="utmTerm" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="视频ID或临时标识符">
                        </div>
                        <div>
                            <label for="utmContent" class="block text-sm font-medium text-gray-700 mb-1">utm_content</label>
                            <select id="utmContent" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="">请选择...</option>
                                <option value="description_link">description_link</option>
                                <option value="pinned_comment">pinned_comment</option>
                                <option value="video_card">video_card</option>
                                <option value="end_screen">end_screen</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label for="status" class="block text-sm font-medium text-gray-700 mb-1">状态 *</label>
                        <select id="status" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" required="">
                            <option value="">请选择...</option>
                            <option value="计划中">计划中</option>
                            <option value="已发布">已发布</option>
                            <option value="已归档">已归档</option>
                        </select>
                    </div>

                    <div>
                        <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">备注</label>
                        <textarea id="notes" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="添加备注..."></textarea>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-md">
                        <label class="block text-sm font-medium text-gray-700 mb-1">生成的UTM链接</label>
                        <div id="generatedUtmLink" class="p-3 bg-gray-100 rounded border border-gray-300 break-all text-sm"></div>
                        <button type="button" id="copyLinkBtn" class="mt-2 px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md text-sm flex items-center">
                            <i class="far fa-copy mr-1"></i> 复制链接
                        </button>
                    </div>

                    <div class="pt-4 flex justify-end space-x-3">
                        <button type="button" id="cancelBtn" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md">取消</button>
                        <button type="submit" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md">保存视频</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 添加/编辑性能数据模态框 -->
    <div id="performanceModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="perfModalTitle" class="text-xl font-bold text-gray-800">更新视频性能数据</h3>
                    <button id="closePerfModal" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="performanceForm" class="space-y-4">
                    <input type="hidden" id="perfVideoId" value="">

                    <div>
                        <p id="perfVideoTitle" class="font-medium text-gray-800"></p>
                        <p id="perfVideoActualId" class="text-sm text-gray-500"></p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="dateRange" class="block text-sm font-medium text-gray-700 mb-1">数据日期范围</label>
                            <input type="text" id="dateRange" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="例如：2025-04-15至2025-04-30">
                        </div>
                        <div>
                            <label for="viewCount" class="block text-sm font-medium text-gray-700 mb-1">YouTube观看数</label>
                            <input type="number" id="viewCount" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" min="0">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="visitCount" class="block text-sm font-medium text-gray-700 mb-1">网站访问量 *</label>
                            <input type="number" id="visitCount" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" min="0" required="">
                        </div>
                        <div>
                            <label for="conversionCount" class="block text-sm font-medium text-gray-700 mb-1">转化数 *</label>
                            <input type="number" id="conversionCount" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" min="0" required="">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">点击率(CTR)</label>
                            <p id="calculatedCTR" class="px-4 py-2 bg-gray-100 rounded border border-gray-300">-</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">转化率</label>
                            <p id="calculatedConvRate" class="px-4 py-2 bg-gray-100 rounded border border-gray-300">-</p>
                        </div>
                    </div>

                    <div>
                        <label for="perfNotes" class="block text-sm font-medium text-gray-700 mb-1">备注</label>
                        <textarea id="perfNotes" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="添加性能数据备注..."></textarea>
                    </div>

                    <div class="pt-4 flex justify-end space-x-3">
                        <button type="button" id="cancelPerfBtn" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md">取消</button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md">保存数据</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 导入/导出模态框 -->
    <div id="importExportModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="ieModalTitle" class="text-xl font-bold text-gray-800">导入/导出数据</h3>
                    <button id="closeIEModal" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div id="exportSection">
                        <h4 class="font-medium text-gray-800 mb-2">导出数据</h4>
                        <p class="text-sm text-gray-600 mb-3">导出所有追踪数据为JSON文件，以便备份或在其他设备上使用。</p>
                        <button id="downloadDataBtn" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center">
                            <i class="fas fa-download mr-1"></i> 下载数据文件
                        </button>
                    </div>

                    <div class="border-t border-gray-200 my-4"></div>

                    <div id="importSection">
                        <h4 class="font-medium text-gray-800 mb-2">导入数据</h4>
                        <p class="text-sm text-gray-600 mb-3">导入之前导出的追踪数据。注意：这将覆盖当前的所有数据。</p>
                        <div class="mb-3">
                            <input type="file" id="importFile" accept=".json" class="hidden">
                            <label for="importFile" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md cursor-pointer inline-flex items-center">
                                <i class="fas fa-upload mr-1"></i> 选择文件
                            </label>
                            <span id="selectedFileName" class="ml-2 text-sm text-gray-600">未选择文件</span>
                        </div>
                        <button id="importDataBtn" class="px-4 py-2 bg-gray-300 text-gray-500 rounded-md flex items-center" disabled="">
                            <i class="fas fa-file-import mr-1"></i> 导入数据
                        </button>
                    </div>

                    <div class="border-t border-gray-200 my-4"></div>

                    <div id="resetSection">
                        <h4 class="font-medium text-red-800 mb-2">重置数据</h4>
                        <p class="text-sm text-gray-600 mb-3">清除所有追踪数据。此操作不可撤销，请谨慎操作。</p>
                        <button id="resetDataBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md flex items-center">
                            <i class="fas fa-trash-alt mr-1"></i> 重置所有数据
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 确认删除模态框 -->
    <div id="confirmDeleteModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">确认删除</h3>
                    <button id="closeConfirmModal" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <p class="text-gray-700">您确定要删除此视频吗？此操作不可撤销。</p>
                    <p id="confirmVideoTitle" class="font-medium text-gray-800"></p>
                    
                    <div class="pt-4 flex justify-end space-x-3">
                        <button id="cancelDeleteBtn" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md">取消</button>
                        <button id="confirmDeleteBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md">确认删除</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 通知提示 -->
    <div id="notification" class="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg hidden">
        <p id="notificationText"></p>
    </div>

    <script>
        // 数据存储
        let videos = [];
        let performanceData = [];
        
        // 当前正在编辑的视频ID
        let currentVideoId = null;
        let currentDeleteId = null;

        // DOM 加载完成后初始化应用
        document.addEventListener('DOMContentLoaded', () => {
            // 加载本地存储的数据
            loadData();
            
            // 初始化标签页导航
            initTabs();
            
            // 初始化视频表单事件
            initVideoForm();
            
            // 初始化性能数据表单事件
            initPerformanceForm();
            
            // 初始化导入导出功能
            initImportExport();
            
            // 更新视频列表
            updateVideosList();
            
            // 更新分析数据
            updateAnalytics();
            
            // 绘制图表
            drawCharts();
        });

        // 初始化标签页导航
        function initTabs() {
            const tabLinks = document.querySelectorAll('.tab-link');
            
            tabLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // 移除所有标签页的活动状态
                    tabLinks.forEach(l => {
                        l.classList.remove('active', 'text-purple-600', 'border-purple-600');
                        l.classList.add('hover:text-gray-600', 'hover:border-gray-300', 'border-transparent');
                    });
                    
                    // 添加当前标签页的活动状态
                    link.classList.remove('hover:text-gray-600', 'hover:border-gray-300', 'border-transparent');
                    link.classList.add('active', 'text-purple-600', 'border-purple-600');
                    
                    // 隐藏所有标签页内容
                    const tabPanes = document.querySelectorAll('.tab-pane');
                    tabPanes.forEach(pane => {
                        pane.classList.add('hidden');
                    });
                    
                    // 显示当前标签页内容
                    const tabId = link.getAttribute('data-tab');
                    document.getElementById(tabId).classList.remove('hidden');
                    
                    // 如果是分析标签页，更新数据和图表
                    if (tabId === 'analytics') {
                        updateAnalytics();
                        drawCharts();
                    }
                });
            });
            
            // 设置默认活动标签页样式
            document.querySelector('.tab-link.active').classList.remove('hover:text-gray-600', 'hover:border-gray-300', 'border-transparent');
            document.querySelector('.tab-link.active').classList.add('text-purple-600', 'border-purple-600');
        }

        // 初始化视频表单事件
        function initVideoForm() {
            // 添加视频按钮
            document.getElementById('addVideoBtn').addEventListener('click', () => {
                openVideoModal();
            });
            
            // 关闭模态框按钮
            document.getElementById('closeModal').addEventListener('click', () => {
                closeVideoModal();
            });
            
            // 取消按钮
            document.getElementById('cancelBtn').addEventListener('click', () => {
                closeVideoModal();
            });
            
            // 复制链接按钮
            document.getElementById('copyLinkBtn').addEventListener('click', () => {
                const link = document.getElementById('generatedUtmLink').textContent;
                if (link) {
                    navigator.clipboard.writeText(link).then(() => {
                        showNotification('链接已复制到剪贴板');
                    });
                }
            });
            
            // 表单提交事件
            document.getElementById('videoForm').addEventListener('submit', (e) => {
                e.preventDefault();
                saveVideo();
            });
            
            // 生成UTM链接实时预览
            const utmParams = ['targetUrl', 'utmSource', 'utmMedium', 'utmCampaign', 'utmTerm', 'utmContent'];
            utmParams.forEach(param => {
                document.getElementById(param).addEventListener('input', updateUtmLink);
            });

            // 视频类型变更时自动设置utmMedium
            document.getElementById('videoType').addEventListener('change', (e) => {
                const videoType = e.target.value;
                if (videoType) {
                    document.getElementById('utmMedium').value = videoType;
                    updateUtmLink();
                }
            });
            
            // 确认删除事件
            document.getElementById('confirmDeleteBtn').addEventListener('click', () => {
                if (currentDeleteId !== null) {
                    deleteVideo(currentDeleteId);
                    closeConfirmDeleteModal();
                }
            });
            
            // 关闭确认删除模态框
            document.getElementById('closeConfirmModal').addEventListener('click', () => {
                closeConfirmDeleteModal();
            });
            
            document.getElementById('cancelDeleteBtn').addEventListener('click', () => {
                closeConfirmDeleteModal();
            });
        }

        // 初始化性能数据表单事件
        function initPerformanceForm() {
            // 关闭性能数据模态框
            document.getElementById('closePerfModal').addEventListener('click', () => {
                closePerformanceModal();
            });
            
            document.getElementById('cancelPerfBtn').addEventListener('click', () => {
                closePerformanceModal();
            });
            
            // 表单提交事件
            document.getElementById('performanceForm').addEventListener('submit', (e) => {
                e.preventDefault();
                savePerformanceData();
            });
            
            // 实时计算CTR和转化率
            document.getElementById('viewCount').addEventListener('input', calculateRates);
            document.getElementById('visitCount').addEventListener('input', calculateRates);
            document.getElementById('conversionCount').addEventListener('input', calculateRates);
            
            // 更新分析数据按钮
            document.getElementById('updateAnalyticsBtn').addEventListener('click', () => {
                updateAnalytics();
                drawCharts();
                showNotification('数据分析已更新');
            });
        }

        // 初始化导入导出功能
        function initImportExport() {
            // 导出按钮
            document.getElementById('exportBtn').addEventListener('click', () => {
                openImportExportModal('export');
            });
            
            // 导入按钮
            document.getElementById('importBtn').addEventListener('click', () => {
                openImportExportModal('import');
            });
            
            // 关闭导入/导出模态框
            document.getElementById('closeIEModal').addEventListener('click', () => {
                closeImportExportModal();
            });
            
            // 下载数据按钮
            document.getElementById('downloadDataBtn').addEventListener('click', () => {
                exportData();
            });
            
            // 导入文件选择
            document.getElementById('importFile').addEventListener('change', (e) => {
                const fileName = e.target.files[0]?.name || '未选择文件';
                document.getElementById('selectedFileName').textContent = fileName;
                
                // 启用或禁用导入按钮
                const importBtn = document.getElementById('importDataBtn');
                if (e.target.files.length > 0) {
                    importBtn.classList.remove('bg-gray-300', 'text-gray-500');
                    importBtn.classList.add('bg-blue-600', 'hover:bg-blue-700', 'text-white');
                    importBtn.disabled = false;
                } else {
                    importBtn.classList.add('bg-gray-300', 'text-gray-500');
                    importBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700', 'text-white');
                    importBtn.disabled = true;
                }
            });
            
            // 导入数据按钮
            document.getElementById('importDataBtn').addEventListener('click', () => {
                importData();
            });
            
            // 重置数据按钮
            document.getElementById('resetDataBtn').addEventListener('click', () => {
                if (confirm('您确定要删除所有数据吗？此操作不可撤销！')) {
                    resetData();
                }
            });
        }

        // 打开视频模态框
        function openVideoModal(videoId = null) {
            // 重置表单
            document.getElementById('videoForm').reset();
            document.getElementById('generatedUtmLink').textContent = '';
            
            // 设置标题
            const modalTitle = document.getElementById('modalTitle');
            
            if (videoId) {
                // 编辑现有视频
                currentVideoId = videoId;
                modalTitle.textContent = '编辑视频';
                
                // 找到要编辑的视频
                const videoToEdit = videos.find(v => v.id === videoId);
                if (videoToEdit) {
                    // 填充表单
                    document.getElementById('videoId').value = videoToEdit.id;
                    document.getElementById('videoTitle').value = videoToEdit.title;
                    document.getElementById('videoType').value = videoToEdit.videoType;
                    document.getElementById('tempVideoId').value = videoToEdit.tempVideoId;
                    document.getElementById('actualVideoId').value = videoToEdit.actualVideoId;
                    document.getElementById('plannedDate').value = videoToEdit.plannedDate;
                    document.getElementById('actualDate').value = videoToEdit.actualDate;
                    document.getElementById('targetUrl').value = videoToEdit.targetUrl;
                    document.getElementById('utmSource').value = videoToEdit.utmSource;
                    document.getElementById('utmMedium').value = videoToEdit.utmMedium;
                    document.getElementById('utmCampaign').value = videoToEdit.utmCampaign;
                    document.getElementById('utmTerm').value = videoToEdit.utmTerm;
                    document.getElementById('utmContent').value = videoToEdit.utmContent;
                    document.getElementById('status').value = videoToEdit.status;
                    document.getElementById('notes').value = videoToEdit.notes;
                    
                    // 更新UTM链接
                    updateUtmLink();
                }
            } else {
                // 添加新视频
                currentVideoId = null;
                modalTitle.textContent = '添加新视频';
                document.getElementById('videoId').value = '';
                
                // 设置默认值
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('plannedDate').value = today;
                document.getElementById('utmSource').value = 'youtube';
                document.getElementById('status').value = '计划中';
            }
            
            // 显示模态框
            document.getElementById('videoModal').classList.remove('hidden');
        }

        // 关闭视频模态框
        function closeVideoModal() {
            document.getElementById('videoModal').classList.add('hidden');
            currentVideoId = null;
        }

        // 更新UTM链接预览
        function updateUtmLink() {
            const targetUrl = document.getElementById('targetUrl').value;
            const utmSource = document.getElementById('utmSource').value;
            const utmMedium = document.getElementById('utmMedium').value;
            const utmCampaign = document.getElementById('utmCampaign').value;
            const utmTerm = document.getElementById('utmTerm').value;
            const utmContent = document.getElementById('utmContent').value;
            
            if (targetUrl && utmSource && utmMedium && utmCampaign) {
                let utmLink = `${targetUrl}${targetUrl.includes('?') ? '&' : '?'}utm_source=${utmSource}&utm_medium=${utmMedium}&utm_campaign=${utmCampaign}`;
                
                if (utmTerm) {
                    utmLink += `&utm_term=${utmTerm}`;
                }
                
                if (utmContent) {
                    utmLink += `&utm_content=${utmContent}`;
                }
                
                document.getElementById('generatedUtmLink').textContent = utmLink;
            } else {
                document.getElementById('generatedUtmLink').textContent = '请填写必填字段生成UTM链接';
            }
        }

        // 保存视频数据
        function saveVideo() {
            const videoId = document.getElementById('videoId').value || generateId();
            const videoTitle = document.getElementById('videoTitle').value;
            const videoType = document.getElementById('videoType').value;
            const tempVideoId = document.getElementById('tempVideoId').value;
            const actualVideoId = document.getElementById('actualVideoId').value;
            const plannedDate = document.getElementById('plannedDate').value;
            const actualDate = document.getElementById('actualDate').value;
            const targetUrl = document.getElementById('targetUrl').value;
            const utmSource = document.getElementById('utmSource').value;
            const utmMedium = document.getElementById('utmMedium').value;
            const utmCampaign = document.getElementById('utmCampaign').value;
            const utmTerm = document.getElementById('utmTerm').value || (actualVideoId || tempVideoId);
            const utmContent = document.getElementById('utmContent').value;
            const status = document.getElementById('status').value;
            const notes = document.getElementById('notes').value;
            
            // 生成UTM链接
            let utmLink = `${targetUrl}${targetUrl.includes('?') ? '&' : '?'}utm_source=${utmSource}&utm_medium=${utmMedium}&utm_campaign=${utmCampaign}`;
            
            if (utmTerm) {
                utmLink += `&utm_term=${utmTerm}`;
            }
            
            if (utmContent) {
                utmLink += `&utm_content=${utmContent}`;
            }
            
            const videoData = {
                id: videoId,
                title: videoTitle,
                videoType: videoType,
                tempVideoId: tempVideoId,
                actualVideoId: actualVideoId,
                plannedDate: plannedDate,
                actualDate: actualDate,
                targetUrl: targetUrl,
                utmSource: utmSource,
                utmMedium: utmMedium,
                utmCampaign: utmCampaign,
                utmTerm: utmTerm,
                utmContent: utmContent,
                utmLink: utmLink,
                status: status,
                notes: notes,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // 检查是添加还是更新
            if (currentVideoId) {
                // 更新现有视频
                const index = videos.findIndex(v => v.id === currentVideoId);
                if (index !== -1) {
                    // 保留创建时间
                    videoData.createdAt = videos[index].createdAt;
                    videos[index] = videoData;
                    showNotification('视频已更新');
                }
            } else {
                // 添加新视频
                videos.push(videoData);
                showNotification('新视频已添加');
            }
            
            // 保存到本地存储
            saveData();
            
            // 更新视频列表
            updateVideosList();
            
            // 关闭模态框
            closeVideoModal();
        }

        // 打开性能数据模态框
        function openPerformanceModal(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (!video) return;
            
            // 设置视频信息
            document.getElementById('perfVideoId').value = video.id;
            document.getElementById('perfVideoTitle').textContent = video.title;
            document.getElementById('perfVideoActualId').textContent = `视频ID: ${video.actualVideoId || '未设置'}`;
            
            // 查找现有性能数据
            const perfData = performanceData.find(p => p.videoId === video.id);
            
            if (perfData) {
                // 填充表单
                document.getElementById('dateRange').value = perfData.dateRange;
                document.getElementById('viewCount').value = perfData.viewCount;
                document.getElementById('visitCount').value = perfData.visitCount;
                document.getElementById('conversionCount').value = perfData.conversionCount;
                document.getElementById('perfNotes').value = perfData.notes;
            } else {
                // 重置表单
                document.getElementById('performanceForm').reset();
            }
            
            // 计算比率
            calculateRates();
            
            // 显示模态框
            document.getElementById('performanceModal').classList.remove('hidden');
        }

        // 关闭性能数据模态框
        function closePerformanceModal() {
            document.getElementById('performanceModal').classList.add('hidden');
        }

        // 计算CTR和转化率
        function calculateRates() {
            const viewCount = parseInt(document.getElementById('viewCount').value) || 0;
            const visitCount = parseInt(document.getElementById('visitCount').value) || 0;
            const conversionCount = parseInt(document.getElementById('conversionCount').value) || 0;
            
            // 计算CTR
            let ctr = '-';
            if (viewCount > 0) {
                ctr = ((visitCount / viewCount) * 100).toFixed(2) + '%';
            }
            document.getElementById('calculatedCTR').textContent = ctr;
            
            // 计算转化率
            let convRate = '-';
            if (visitCount > 0) {
                convRate = ((conversionCount / visitCount) * 100).toFixed(2) + '%';
            }
            document.getElementById('calculatedConvRate').textContent = convRate;
        }

        // 保存性能数据
        function savePerformanceData() {
            const videoId = document.getElementById('perfVideoId').value;
            const dateRange = document.getElementById('dateRange').value;
            const viewCount = parseInt(document.getElementById('viewCount').value) || 0;
            const visitCount = parseInt(document.getElementById('visitCount').value) || 0;
            const conversionCount = parseInt(document.getElementById('conversionCount').value) || 0;
            const notes = document.getElementById('perfNotes').value;
            
            // 计算CTR和转化率
            let ctr = 0;
            if (viewCount > 0) {
                ctr = (visitCount / viewCount) * 100;
            }
            
            let conversionRate = 0;
            if (visitCount > 0) {
                conversionRate = (conversionCount / visitCount) * 100;
            }
            
            const perfData = {
                videoId: videoId,
                dateRange: dateRange,
                viewCount: viewCount,
                visitCount: visitCount,
                conversionCount: conversionCount,
                ctr: ctr,
                conversionRate: conversionRate,
                notes: notes,
                updatedAt: new Date().toISOString()
            };
            
            // 检查是否已存在该视频的性能数据
            const index = performanceData.findIndex(p => p.videoId === videoId);
            
            if (index !== -1) {
                // 更新现有数据
                performanceData[index] = perfData;
            } else {
                // 添加新数据
                performanceData.push(perfData);
            }
            
            // 保存到本地存储
            saveData();
            
            // 更新分析数据
            updateAnalytics();
            
            // 重绘图表
            drawCharts();
            
            // 关闭模态框
            closePerformanceModal();
            
            showNotification('性能数据已保存');
        }

        // 删除视频
        function deleteVideo(videoId) {
            // 删除视频
            videos = videos.filter(v => v.id !== videoId);
            
            // 删除相关性能数据
            performanceData = performanceData.filter(p => p.videoId !== videoId);
            
            // 保存到本地存储
            saveData();
            
            // 更新视频列表
            updateVideosList();
            
            // 更新分析数据
            updateAnalytics();
            
            // 重绘图表
            drawCharts();
            
            showNotification('视频已删除');
        }

        // 打开确认删除模态框
        function openConfirmDeleteModal(videoId) {
            currentDeleteId = videoId;
            
            // 显示视频标题
            const video = videos.find(v => v.id === videoId);
            if (video) {
                document.getElementById('confirmVideoTitle').textContent = video.title;
            }
            
            // 显示模态框
            document.getElementById('confirmDeleteModal').classList.remove('hidden');
        }

        // 关闭确认删除模态框
        function closeConfirmDeleteModal() {
            document.getElementById('confirmDeleteModal').classList.add('hidden');
            currentDeleteId = null;
        }

        // 打开导入/导出模态框
        function openImportExportModal(mode) {
            // 重置表单
            document.getElementById('importFile').value = '';
            document.getElementById('selectedFileName').textContent = '未选择文件';
            
            // 禁用导入按钮
            const importBtn = document.getElementById('importDataBtn');
            importBtn.classList.add('bg-gray-300', 'text-gray-500');
            importBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700', 'text-white');
            importBtn.disabled = true;
            
            // 设置标题
            const ieModalTitle = document.getElementById('ieModalTitle');
            
            if (mode === 'export') {
                ieModalTitle.textContent = '导出数据';
            } else {
                ieModalTitle.textContent = '导入数据';
            }
            
            // 显示模态框
            document.getElementById('importExportModal').classList.remove('hidden');
        }

        // 关闭导入/导出模态框
        function closeImportExportModal() {
            document.getElementById('importExportModal').classList.add('hidden');
        }

        // 导出数据
        function exportData() {
            const data = {
                videos: videos,
                performanceData: performanceData,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            
            // 创建下载链接
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            
            // 设置文件名
            const date = new Date().toISOString().split('T')[0];
            a.download = `youtube_utm_tracker_${date}.json`;
            
            // 触发下载
            document.body.appendChild(a);
            a.click();
            
            // 清理
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('数据已导出');
        }

        // 导入数据
        function importData() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showNotification('请选择文件', 'error');
                return;
            }
            
            const reader = new FileReader();
            
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // 验证数据格式
                    if (!data.videos || !Array.isArray(data.videos)) {
                        throw new Error('无效的数据格式');
                    }
                    
                    // 导入数据
                    videos = data.videos;
                    performanceData = data.performanceData || [];
                    
                    // 保存到本地存储
                    saveData();
                    
                    // 更新视频列表
                    updateVideosList();
                    
                    // 更新分析数据
                    updateAnalytics();
                    
                    // 重绘图表
                    drawCharts();
                    
                    showNotification('数据已成功导入');
                    closeImportExportModal();
                } catch (error) {
                    showNotification('导入失败: ' + error.message, 'error');
                }
            };
            
            reader.readAsText(file);
        }

        // 重置数据
        function resetData() {
            videos = [];
            performanceData = [];
            
            // 保存到本地存储
            saveData();
            
            // 更新视频列表
            updateVideosList();
            
            // 更新分析数据
            updateAnalytics();
            
            // 重绘图表
            drawCharts();
            
            showNotification('所有数据已重置');
            closeImportExportModal();
        }

        // 更新视频列表
        function updateVideosList() {
            const videosList = document.getElementById('videosList');
            const noVideosMessage = document.getElementById('noVideosMessage');
            
            // 清空列表
            videosList.innerHTML = '';
            
            // 获取筛选条件
            const searchTerm = document.getElementById('searchVideo').value.toLowerCase();
            const filterStatus = document.getElementById('filterStatus').value;
            
            // 筛选视频
            let filteredVideos = videos;
            
            if (searchTerm) {
                filteredVideos = filteredVideos.filter(video => 
                    video.title.toLowerCase().includes(searchTerm) || 
                    (video.actualVideoId && video.actualVideoId.toLowerCase().includes(searchTerm)) ||
                    (video.tempVideoId && video.tempVideoId.toLowerCase().includes(searchTerm))
                );
            }
            
            if (filterStatus && filterStatus !== 'all') {
                filteredVideos = filteredVideos.filter(video => video.status === filterStatus);
            }
            
            // 按创建日期排序（最新的在前）
            filteredVideos.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            // 显示或隐藏无视频消息
            if (filteredVideos.length === 0) {
                if (videos.length === 0) {
                    noVideosMessage.classList.remove('hidden');
                } else {
                    noVideosMessage.classList.add('hidden');
                    videosList.innerHTML = '<tr><td colspan="9" class="py-4 text-center text-gray-500">没有找到匹配的视频</td></tr>';
                }
            } else {
                noVideosMessage.classList.add('hidden');
                
                // 生成视频列表
                filteredVideos.forEach((video, index) => {
                    const row = document.createElement('tr');
                    row.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                    
                    // 设置状态样式
                    let statusClass = '';
                    switch (video.status) {
                        case '计划中':
                            statusClass = 'bg-yellow-100 text-yellow-800';
                            break;
                        case '已发布':
                            statusClass = 'bg-green-100 text-green-800';
                            break;
                        case '已归档':
                            statusClass = 'bg-gray-100 text-gray-800';
                            break;
                    }
                    
                    // 生成行内容
                    row.innerHTML = `
                        <td class="py-3 px-3 border-b border-gray-200">${index + 1}</td>
                        <td class="py-3 px-3 border-b border-gray-200 font-medium">${video.title}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${video.videoType}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${video.tempVideoId || '-'}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${video.actualVideoId || '-'}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${video.plannedDate || '-'}</td>
                        <td class="py-3 px-3 border-b border-gray-200">
                            <span class="px-2 py-1 rounded-full text-xs ${statusClass}">${video.status}</span>
                        </td>
                        <td class="py-3 px-3 border-b border-gray-200">
                            <button class="text-blue-600 hover:text-blue-800 mr-2" onclick="copyToClipboard('${video.utmLink}')">
                                <i class="far fa-copy"></i> 复制
                            </button>
                        </td>
                        <td class="py-3 px-3 border-b border-gray-200">
                            <div class="flex space-x-2">
                                <button class="text-purple-600 hover:text-purple-800" onclick="openVideoModal('${video.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-blue-600 hover:text-blue-800" onclick="openPerformanceModal('${video.id}')">
                                    <i class="fas fa-chart-line"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800" onclick="openConfirmDeleteModal('${video.id}')">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    videosList.appendChild(row);
                });
            }
        }

        // 复制到剪贴板
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('链接已复制到剪贴板');
            });
        }

        // 更新分析数据
        function updateAnalytics() {
            const totalVideosEl = document.getElementById('totalVideos');
            const totalVisitsEl = document.getElementById('totalVisits');
            const totalConversionsEl = document.getElementById('totalConversions');
            const avgConversionRateEl = document.getElementById('avgConversionRate');
            const analyticsTableBody = document.getElementById('analyticsTableBody');
            const noAnalyticsMessage = document.getElementById('noAnalyticsMessage');
            
            // 计算总数据
            const totalVideos = videos.length;
            
            let totalVisits = 0;
            let totalConversions = 0;
            
            performanceData.forEach(data => {
                totalVisits += data.visitCount || 0;
                totalConversions += data.conversionCount || 0;
            });
            
            // 计算平均转化率
            let avgConversionRate = 0;
            if (totalVisits > 0) {
                avgConversionRate = (totalConversions / totalVisits) * 100;
            }
            
            // 更新统计数据
            totalVideosEl.textContent = totalVideos;
            totalVisitsEl.textContent = totalVisits;
            totalConversionsEl.textContent = totalConversions;
            avgConversionRateEl.textContent = avgConversionRate.toFixed(2) + '%';
            
            // 清空表格
            analyticsTableBody.innerHTML = '';
            
            // 检查是否有性能数据
            if (performanceData.length === 0) {
                noAnalyticsMessage.classList.remove('hidden');
            } else {
                noAnalyticsMessage.classList.add('hidden');
                
                // 按访问量排序（从高到低）
                const sortedData = [...performanceData].sort((a, b) => (b.visitCount || 0) - (a.visitCount || 0));
                
                // 生成表格行
                sortedData.forEach(data => {
                    const video = videos.find(v => v.id === data.videoId);
                    if (!video) return;
                    
                    const row = document.createElement('tr');
                    
                    // 计算转化率
                    const conversionRate = data.visitCount > 0 ? ((data.conversionCount / data.visitCount) * 100).toFixed(2) + '%' : '-';
                    
                    row.innerHTML = `
                        <td class="py-3 px-3 border-b border-gray-200 font-medium">${video.title}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${video.actualVideoId || '-'}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${video.actualDate || '-'}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${data.viewCount || 0}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${data.visitCount || 0}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${data.conversionCount || 0}</td>
                        <td class="py-3 px-3 border-b border-gray-200">${conversionRate}</td>
                        <td class="py-3 px-3 border-b border-gray-200">
                            <button class="text-blue-600 hover:text-blue-800" onclick="openPerformanceModal('${video.id}')">
                                <i class="fas fa-edit"></i> 更新
                            </button>
                        </td>
                    `;
                    
                    analyticsTableBody.appendChild(row);
                });
            }
        }

        // 绘制图表
        function drawCharts() {
            // 获取有性能数据的视频
            const videosWithPerf = performanceData.map(data => {
                const video = videos.find(v => v.id === data.videoId);
                if (!video) return null;
                
                return {
                    id: video.id,
                    title: video.title,
                    actualVideoId: video.actualVideoId,
                    videoType: video.videoType,
                    actualDate: video.actualDate,
                    visitCount: data.visitCount || 0,
                    conversionCount: data.conversionCount || 0,
                    viewCount: data.viewCount || 0,
                    conversionRate: data.visitCount > 0 ? (data.conversionCount / data.visitCount) * 100 : 0
                };
            }).filter(v => v !== null);
            
            // 按发布日期排序
            videosWithPerf.sort((a, b) => {
                if (!a.actualDate) return 1;
                if (!b.actualDate) return -1;
                return new Date(a.actualDate) - new Date(b.actualDate);
            });
            
            // 绘制访问量比较图表
            drawVisitsChart(videosWithPerf);
            
            // 绘制转化率比较图表
            drawConversionRateChart(videosWithPerf);
            
            // 绘制趋势图表
            drawTrendsChart(videosWithPerf);
        }

        // 绘制访问量比较图表
        function drawVisitsChart(data) {
            const ctx = document.getElementById('visitsChart').getContext('2d');
            
            // 销毁现有图表
            if (window.visitsChart instanceof Chart) {
                window.visitsChart.destroy();
            }
            
            // 提取数据
            const labels = data.map(v => v.title.length > 15 ? v.title.substring(0, 15) + '...' : v.title);
            const visits = data.map(v => v.visitCount);
            const conversions = data.map(v => v.conversionCount);
            
            // 创建图表
            window.visitsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '访问量',
                            data: visits,
                            backgroundColor: 'rgba(99, 102, 241, 0.7)',
                            borderColor: 'rgba(99, 102, 241, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '转化数',
                            data: conversions,
                            backgroundColor: 'rgba(16, 185, 129, 0.7)',
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // 绘制转化率比较图表
        function drawConversionRateChart(data) {
            const ctx = document.getElementById('conversionRateChart').getContext('2d');
            
            // 销毁现有图表
            if (window.conversionRateChart instanceof Chart) {
                window.conversionRateChart.destroy();
            }
            
            // 提取数据
            const labels = data.map(v => v.title.length > 15 ? v.title.substring(0, 15) + '...' : v.title);
            const conversionRates = data.map(v => v.conversionRate);
            
            // 创建图表
            window.conversionRateChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '转化率(%)',
                            data: conversionRates,
                            backgroundColor: 'rgba(245, 158, 11, 0.7)',
                            borderColor: 'rgba(245, 158, 11, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `转化率: ${context.parsed.y.toFixed(2)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '转化率(%)'
                            }
                        }
                    }
                }
            });
        }

        // 绘制趋势图表
        function drawTrendsChart(data) {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            // 销毁现有图表
            if (window.trendsChart instanceof Chart) {
                window.trendsChart.destroy();
            }
            
            // 提取数据
            const labels = data.map(v => v.actualDate || '未发布');
            const visits = data.map(v => v.visitCount);
            const conversions = data.map(v => v.conversionCount);
            const conversionRates = data.map(v => v.conversionRate);
            
            // 创建图表
            window.trendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '访问量',
                            data: visits,
                            borderColor: 'rgba(99, 102, 241, 1)',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            yAxisID: 'y',
                            tension: 0.1
                        },
                        {
                            label: '转化数',
                            data: conversions,
                            borderColor: 'rgba(16, 185, 129, 1)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            yAxisID: 'y',
                            tension: 0.1
                        },
                        {
                            label: '转化率(%)',
                            data: conversionRates,
                            borderColor: 'rgba(245, 158, 11, 1)',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            yAxisID: 'y1',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    if (label === '转化率(%)') {
                                        return `${label}: ${value.toFixed(2)}%`;
                                    }
                                    return `${label}: ${value}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '数量'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '转化率(%)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }

        // 显示通知
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            // 设置消息
            notificationText.textContent = message;
            
            // 设置样式
            if (type === 'success') {
                notification.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50';
            } else {
                notification.className = 'fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md shadow-lg z-50';
            }
            
            // 显示通知
            notification.classList.remove('hidden');
            
            // 3秒后隐藏通知
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }

        // 生成唯一ID
        function generateId() {
            return 'vid_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // 从本地存储加载数据
        function loadData() {
            try {
                const storedVideos = localStorage.getItem('youtubeUtmVideos');
                const storedPerformance = localStorage.getItem('youtubeUtmPerformance');
                
                if (storedVideos) {
                    videos = JSON.parse(storedVideos);
                }
                
                if (storedPerformance) {
                    performanceData = JSON.parse(storedPerformance);
                }
            } catch (error) {
                console.error('加载数据失败:', error);
                videos = [];
                performanceData = [];
            }
        }

        // 保存数据到本地存储
        function saveData() {
            try {
                localStorage.setItem('youtubeUtmVideos', JSON.stringify(videos));
                localStorage.setItem('youtubeUtmPerformance', JSON.stringify(performanceData));
            } catch (error) {
                console.error('保存数据失败:', error);
                showNotification('保存数据失败: ' + error.message, 'error');
            }
        }

        // 搜索和筛选事件
        document.getElementById('searchVideo').addEventListener('input', updateVideosList);
        document.getElementById('filterStatus').addEventListener('change', updateVideosList);
    </script>


    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDprUk2TEgWrjN2pXDpQC1wnD3xVlF2AqeKV9GPft9nDuzIHR9FEp7Gyzv3fIiVimm7wKVsXy0V6LcbxUdHwSKe6hikte3HKodZO%2FfFrmLN6Z9D0T1sTRaJvsdUNgDQt1D80%2FxD1Fuh2qZ3taeEhDRNGvlaEN4ufm4yjcuLpMfsbfC5YOZAs7jgCZWWDAV9bDr4ENhxoRrVVfhj1NMg1BrthoHooPCarcvkLSlpYU1FHYdk3AL2U4Xna3lBo9vfSFwAYi4bUK90jBxCmfk03sgpG0OYNWYaJ3qssZLCLuMQtCNLmba32uRtUw6WHlkY3d9xRaFC4BI5SwpUoo5t%2FimLElpq3ge%2FxhLlfBNq3DFtJVbmATWSQYxFijKQyd2fRJ6PdUNr5txtw96GW7K7saZ%2FSUncQcL96mpedxKIZZZkONAqOuV6s74spu2kITrPULpr6eyHbfhbSfG0De948wQK9XKeCQ3%2BVoov6R2M9CppMYA4rm1SDBJrJcc6FRqK3%2BI7XnOJZIl37lZE%2Bq17MtIDXSzvchWLQi3Toxdp9iFjvKucnpEQ7p0quvYXTX4PmN4yfrIESC7od44NU8SeNwiOQ%3D";
        window.__genspark_locale = "zh-CN";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDprUk2TEgWrjN2pXDpQC1wnD3xVlF2AqeKV9GPft9nDuzIHR9FEp7Gyzv3fIiVimm7wKVsXy0V6LcbxUdHwSKe6hikte3HKodZO/fFrmLN6Z9D0T1sTRaJvsdUNgDQt1D80/xD1Fuh2qZ3taeEhDRNGvlaEN4ufm4yjcuLpMfsbfC5YOZAs7jgCZWWDAV9bDr4ENhxoRrVVfhj1NMg1BrthoHooPCarcvkLSlpYU1FHYdk3AL2U4Xna3lBo9vfSFwAYi4bUK90jBxCmfk03sgpG0OYNWYaJ3qssZLCLuMQtCNLmba32uRtUw6WHlkY3d9xRaFC4BI5SwpUoo5t/imLElpq3ge/xhLlfBNq3DFtJVbmATWSQYxFijKQyd2fRJ6PdUNr5txtw96GW7K7saZ/SUncQcL96mpedxKIZZZkONAqOuV6s74spu2kITrPULpr6eyHbfhbSfG0De948wQK9XKeCQ3+Voov6R2M9CppMYA4rm1SDBJrJcc6FRqK3+I7XnOJZIl37lZE+q17MtIDXSzvchWLQi3Toxdp9iFjvKucnpEQ7p0quvYXTX4PmN4yfrIESC7od44NU8SeNwiOQ=";
    </script>
    </body><plasmo-csui id="aitdk-csui"><template shadowrootmode="open"><style>*,:before,:after{box-sizing:border-box;border:0 solid #e5e7eb}:before,:after{--tw-content:""}html{-webkit-text-size-adjust:100%;tab-size:4;font-feature-settings:normal;font-variation-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{line-height:inherit;margin:0}hr{color:inherit;border-top-width:1px;height:0}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-feature-settings:inherit;font-variation-settings:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:#0000;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{margin:0;padding:0;list-style:none}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}[hidden]{display:none}:host,:root{--background:0 0% 100%;--foreground:224 71.4% 4.1%;--card:0 0% 100%;--card-foreground:224 71.4% 4.1%;--popover:0 0% 100%;--popover-foreground:224 71.4% 4.1%;--primary:262.1 83.3% 57.8%;--primary-foreground:210 20% 98%;--secondary:220 14.3% 95.9%;--secondary-foreground:220.9 39.3% 11%;--muted:220 14.3% 95.9%;--muted-foreground:220 8.9% 46.1%;--accent:220 14.3% 95.9%;--accent-foreground:220.9 39.3% 11%;--destructive:0 84.2% 60.2%;--destructive-foreground:210 20% 98%;--border:220 13% 91%;--input:220 13% 91%;--ring:262.1 83.3% 57.8%;--radius:4.2px;z-index:2147483647}.dark{--background:224 71.4% 4.1%;--foreground:210 20% 98%;--card:224 71.4% 4.1%;--card-foreground:210 20% 98%;--popover:224 71.4% 4.1%;--popover-foreground:210 20% 98%;--primary:263.4 70% 50.4%;--primary-foreground:210 20% 98%;--secondary:215 27.9% 16.9%;--secondary-foreground:210 20% 98%;--muted:215 27.9% 16.9%;--muted-foreground:217.9 10.6% 64.9%;--accent:215 27.9% 16.9%;--accent-foreground:210 20% 98%;--destructive:0 62.8% 30.6%;--destructive-foreground:210 20% 98%;--border:215 27.9% 16.9%;--input:215 27.9% 16.9%;--ring:263.4 70% 50.4%}*{border-color:hsl(var(--border))}html{font-size:14px}body{background-color:hsl(var(--background));color:hsl(var(--foreground));font-feature-settings:"rlig" 1,"calt" 1;font-size:14px}*,:before,:after,::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%;margin-left:auto;margin-right:auto;padding-left:28px;padding-right:28px}@media (width>=1400px){.container{max-width:1400px}}.visible{visibility:visible}.invisible{visibility:hidden}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.bottom-0{bottom:0}.left-1\/2{left:50%}.right-0{right:0}.right-2{right:7px}.top-0{top:0}.top-1\/2{top:50%}.top-2{top:7px}.-z-\[1\]{z-index:-1}.z-\[1\]{z-index:1}.z-\[2147483647\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.-ml-\[13px\]{margin-left:-13px}.-mt-\[13px\]{margin-top:-13px}.mt-3{margin-top:10.5px}.mt-5{margin-top:17.5px}.block{display:block}.flex{display:flex}.hidden{display:none}.h-full{height:100%}.w-\[420px\]{width:420px}.w-\[520px\]{width:520px}.w-full{width:100%}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:1s linear infinite spin}.cursor-pointer{cursor:pointer}.items-center{align-items:center}.justify-center{justify-content:center}.gap-x-2{column-gap:7px}.rounded{border-radius:3.5px}.bg-\[\#635bff\]{--tw-bg-opacity:1;background-color:rgb(99 91 255/var(--tw-bg-opacity))}.bg-\[\#635bff\]\/10{background-color:#635bff1a}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-1{padding:3.5px}.p-6{padding:21px}.px-4{padding-left:14px;padding-right:14px}.py-2{padding-top:7px;padding-bottom:7px}.py-2\.5{padding-top:8.75px;padding-bottom:8.75px}.text-\[14px\]{font-size:14px}.text-xl{font-size:17.5px;line-height:24.5px}.font-medium{font-weight:500}.leading-6{line-height:21px}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.shadow-2xl{--tw-shadow:0 25px 50px -12px #00000040;--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}@keyframes enter{0%{opacity:var(--tw-enter-opacity,1);transform:translate3d(var(--tw-enter-translate-x,0),var(--tw-enter-translate-y,0),0)scale3d(var(--tw-enter-scale,1),var(--tw-enter-scale,1),var(--tw-enter-scale,1))rotate(var(--tw-enter-rotate,0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity,1);transform:translate3d(var(--tw-exit-translate-x,0),var(--tw-exit-translate-y,0),0)scale3d(var(--tw-exit-scale,1),var(--tw-exit-scale,1),var(--tw-exit-scale,1))rotate(var(--tw-exit-rotate,0))}}.hover\:bg-\[\#635bff\]\/90:hover{background-color:#635bffe6}</style><div id="plasmo-shadow-container" style="z-index: 2147483647; position: relative;"><div id="plasmo-inline" class="plasmo-csui-container" style="display: flex; position: relative; top: 0px; left: 0px;"><div class="aitdk-extension shadow-2xl flex fixed w-[520px] top-0 right-0 bottom-0 bg-white hidden"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x absolute right-2 top-2 z-[1] p-1 cursor-pointer text-gray-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-circle animate-spin text-gray-400 absolute top-1/2 left-1/2 -ml-[13px] -mt-[13px] -z-[1]"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg></div></div></div></template></plasmo-csui></html>